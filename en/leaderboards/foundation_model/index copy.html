<!DOCTYPE html>
<html>
<head>
  <script src="/OpenTS/js/jquery.min.js"></script>
  <link rel="icon" type="image/png" href="https://decisionintelligence.github.io/OpenTS/figures/logo10.png">
  <meta name="google-site-verification" content="0HzGL60Z8ChYs-wL6ogMpNB-px7tcu9PcRD1z6OQWe8" />
  <meta name="msvalidate.01" content="FD2A799A0C64AAB3A8289819F1C2DFFB" />
  <meta http-equiv="Access-Control-Allow-Origin" content="*">
  <meta http-equiv='content-language' content='en-gb'>
  <meta charset="utf-8">
  
  
  <title>OpenTS - A Comprehensive and Fair Benchmark for Time Series Analytics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="subtitle" content="A Comprehensive and Fair Benchmark for Time Series Analytics">
  <meta name="description" content="Leaderboards   Table of Contents Leaderboard for zero-shot setting Leaderboard for few-shot setting Leaderboard for full-shot setting  Leaderboard for zero-shot setting">
<meta property="og:type" content="website">
<meta property="og:title" content="OpenTS - A Comprehensive and Fair Benchmark for Time Series Analytics">
<meta property="og:url" content="https://chy181.github.io/OpenTS/en/leaderboards/foundation_model/index%20copy.html">
<meta property="og:site_name" content="OpenTS - A Comprehensive and Fair Benchmark for Time Series Analytics">
<meta property="og:description" content="Leaderboards   Table of Contents Leaderboard for zero-shot setting Leaderboard for few-shot setting Leaderboard for full-shot setting  Leaderboard for zero-shot setting">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-10-25T02:36:49.963Z">
<meta property="article:modified_time" content="2024-10-25T02:36:49.963Z">
<meta property="article:author" content="DecisionIntelligence |">
<meta name="twitter:card" content="summary">
  

  <link href="/OpenTS/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/OpenTS/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  
<link rel="stylesheet" href="/OpenTS/css/style.css">

  

<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <!-- blair add baidu tongji start... @2017.10.03 -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?8864d";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
<!-- blair add baidu tongji end ! @2017.10.03 -->
<!-- jiangting add start... @2020.08.30 -->

<!-- jiangting add end !  @2020.08.30 -->

<header id="header" style="min-width:1040px">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <!-- <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a> -->
      

      <nav id="main-nav">
        
        
          
          
            <div class="menu-container" data-lang="zh-cn">
              <!-- <p style="font-size: 25px;font-weight: 620;">OpenTS</p> -->
              <a id="logo" style="margin:3px 0; margin-left: 5px;" class="logo" href="/OpenTS/"></a>
              <!-- <div style="width: 4px;height: 58px;border-right: 2px solid #797777;"></div> -->
              
                
                
                
                  <a class="main-nav-link" href="/OpenTS/zh-cn/">OpenTS</a>
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">æµ‹è¯„åŸºå‡† <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/zh-cn/overview">æ¦‚è¿°</a>
                      
                        <a href="/OpenTS/zh-cn/datasets">æ•°æ®é›†</a>
                      
                        <a href="/OpenTS/zh-cn/get%20started/">å¿«é€Ÿå¼€å§‹</a>
                      
                        <a href="/OpenTS/zh-cn/algorithms">ç®—æ³•</a>
                      
                        <a href="/OpenTS/zh-cn/team">å›¢é˜Ÿ</a>
                      
                        <a href="/OpenTS/zh-cn/papers">è®ºæ–‡</a>
                      
                        <a target="_blank" rel="noopener" href="https://github.com/decisionintelligence/TFB">ä»£ç </a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">æ¨¡å‹ <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/zh-cn/algorithms/methods/#Specific-Methods-introduction">ç«¯åˆ°ç«¯æ¨¡å‹</a>
                      
                        <a href="/OpenTS/zh-cn/algorithms/methods/#Foundation-Methods-introduction">åŸºç¡€æ¨¡å‹</a>
                      
                        <a href="/OpenTS/zh-cn/algorithms/AutoCTS">è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ </a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">åº”ç”¨ <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/zh-cn/datasets/#Overview">AIè¿ç»´</a>
                      
                        <a href="/OpenTS/zh-cn/datasets/#Univariate-time-series">æ™ºèƒ½äº¤é€š</a>
                      
                        <a href="/OpenTS/zh-cn/datasets/#Multivariate-time-series">è™šæ‹Ÿç”µå‚</a>
                      
                        <a href="/OpenTS/null">AI4DB</a>
                      
                        <a href="/OpenTS/null">é‡‘èç§‘æŠ€</a>
                      
                        <a href="/OpenTS/null">æ™ºèƒ½åº”æ€¥å“åº”</a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">æ’è¡Œæ¦œ <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/zh-cn/leaderboards/univariate_time_series">å•å˜é‡é¢„æµ‹</a>
                      
                        <a href="/OpenTS/zh-cn/leaderboards/multivariate_time_series">å¤šå˜é‡é¢„æµ‹</a>
                      
                        <a href="/OpenTS/zh-cn/leaderboards/foundation_model">åŸºç¡€æ¨¡å‹</a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <a class="main-nav-link" target="_blank" rel="noopener" href="https://decisionintelligence.github.io/index">å®éªŒå®¤</a>
                
      
              
                
                
                
                  <a class="main-nav-link" target="_blank" rel="noopener" href="https://github.com/decisionintelligence">Github</a>
                
      
              
                
                
                
                  <a id="lang-toggle-link-zh-cn" class="main-nav-link" href="javascript:;">ä¸­æ–‡|English</a>

                
                
      
              
            </div>
          
        
          
          
            <div class="menu-container" data-lang="en">
              <!-- <p style="font-size: 25px;font-weight: 620;">OpenTS</p> -->
              <a id="logo" style="margin:3px 0; margin-left: 5px;" class="logo" href="/OpenTS/"></a>
              <!-- <div style="width: 4px;height: 58px;border-right: 2px solid #797777;"></div> -->
              
                
                
                
                  <a class="main-nav-link" href="/OpenTS/en/">OpenTS</a>
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">Benchmark <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/en/overview">Overview</a>
                      
                        <a href="/OpenTS/en/datasets">Datasets</a>
                      
                        <a href="/OpenTS/en/get%20started/">Get started</a>
                      
                        <a href="/OpenTS/en/algorithms">Algorithms</a>
                      
                        <a href="/OpenTS/en/team">Team</a>
                      
                        <a href="/OpenTS/en/papers">Papers</a>
                      
                        <a target="_blank" rel="noopener" href="https://github.com/decisionintelligence/TFB">Codes</a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">Models <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/en/algorithms/methods/#Specific-Methods-introduction">Specific models</a>
                      
                        <a href="/OpenTS/en/algorithms/methods/#Foundation-Methods-introduction">Foundation models</a>
                      
                        <a href="/OpenTS/en/algorithms/AutoCTS">AutoML methods</a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">Application <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/en/datasets/#Overview">AIOps</a>
                      
                        <a href="/OpenTS/en/datasets/#Univariate-time-series">Intelligent Transportation</a>
                      
                        <a href="/OpenTS/en/datasets/#Multivariate-time-series">Virtual Power Plants</a>
                      
                        <a href="/OpenTS/null">AI4DB</a>
                      
                        <a href="/OpenTS/null">FinTech</a>
                      
                        <a href="/OpenTS/null">Smart Emergency Response</a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <div class="dropdown">
                    <a class="main-nav-link dropdown-toggle">Leaderboard <span class="caret"></span></a>
                    <div class="dropdown-content">
                      
                        <a href="/OpenTS/en/leaderboards/univariate_time_series">Univariate time series</a>
                      
                        <a href="/OpenTS/en/leaderboards/multivariate_time_series">Multivariate time series</a>
                      
                        <a href="/OpenTS/en/leaderboards/foundation_model">Foundation model</a>
                      
                    </div>
                  </div>
      
                
                
      
              
                
                
                
                  <a class="main-nav-link" target="_blank" rel="noopener" href="https://decisionintelligence.github.io/index">Lab</a>
                
      
              
                
                
                
                  <a class="main-nav-link" target="_blank" rel="noopener" href="https://github.com/decisionintelligence">Github</a>
                
      
              
                
                
                
                  <a id="lang-toggle-link-en" class="main-nav-link" href="javascript:;">English|ä¸­æ–‡</a>

                
                
      
              
            </div>
          
        
      </nav>
    
    </div>
  </div>
</header>

<style>
  #header {
    position: relative;
    z-index: 10;
    overflow: visible;
  }

  #header-outer {
    position: relative;
    z-index: 10;
    overflow: visible;
  }

  #header-inner {
    position: relative;
    z-index: 10;
    overflow: visible;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 10px;
    width: 1000px; /* è®¾ç½®æœ€å¤§å®½åº¦ */
    margin: auto; /* å±…ä¸­å¯¹é½ */ /* ç¡®ä¿å æ»¡çˆ¶å…ƒç´ çš„å®½åº¦ */
    flex-wrap: nowrap; /* ä¿æŒå†…å®¹åœ¨åŒä¸€è¡Œ */
  }

  .dropdown {
    position: relative;
    display: inline-block;
    text-align: right;
  }

  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1000;
    top: 100%;
    right: 0;
    width: auto;
    min-width: 100%;
    white-space: nowrap;
  }

  .dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    text-align: left;
    border-top: 1px solid #ddd;
  }

  .dropdown-content a:first-child {
    border-top: none;
  }

  .dropdown-content a:hover {
    background-color: #f1f1f1;
  }

  .dropdown:hover .dropdown-content {
    display: block;
  }

  .dropdown-toggle::after {
    content: " â–¼";
    font-size: 0.55em;
    vertical-align: middle;
  }

  #main-nav {
    display: flex;
    align-items: center;
    flex-grow: 1;
    justify-content: space-around;
    flex-wrap: nowrap; /* ä¿æŒå†…å®¹åœ¨åŒä¸€è¡Œ */
  }

  .main-nav-link {
    padding: 0 10px; /* å‡å°‘ paddingï¼Œç¼©å°æ ç›®é—´è· */
  }

  

  @media (max-width: 480px) {
    .main-nav-link {
      padding: 5px; /* è¿›ä¸€æ­¥å‡å°‘ paddingï¼Œåœ¨å°å±å¹•ä¸Šæ›´ç´§å‡‘ */
      flex: 1;
      text-align: center;
    }
  }
</style>

    <br>
    <section id="main" class="outer"><article id="page-" class="article article-type-page" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    <div class="article-meta">
      <!--<a href="/OpenTS/en/leaderboards/foundation_model/index%20copy.html" class="article-date">
  <time datetime="2024-10-25T02:36:49.963Z" itemprop="datePublished">2024-10-25</time>
</a>-->
      <!-- 
--><!-- by blair 160724 -->
      <!-- by blair
      
      -->
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Leaderboards"><a href="#Leaderboards" class="headerlink" title="Leaderboards"></a>Leaderboards</h1><script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>


<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ol>
<li><a href="#Leaderboard-for-zero-shot-setting">Leaderboard for zero-shot setting</a></li>
<li><a href="#Leaderboard-for-few-shot-setting">Leaderboard for few-shot setting</a></li>
<li><a href="#Leaderboard-for-full-shot-setting">Leaderboard for full-shot setting</a></li>
</ol>
<h2 id="Leaderboard-for-zero-shot-setting"><a href="#Leaderboard-for-zero-shot-setting" class="headerlink" title="Leaderboard for zero-shot setting"></a>Leaderboard for zero-shot setting</h2><div class="main-container" id="main-container-zero">
  <div class="checkbox-wrapper">
    <div class="checkbox-container" id="dataset-container-mul-type-zero">
    </div>
    <div class="checkbox-container" id="dataset-container-mul-up-zero">
      <div class="category" style="margin-bottom:0px">
        <h3>
          <input type="checkbox" id="select-all-Metrics-zero" style='display:none' onchange="toggleCategory('Metrics','zero', this.checked)">
          Metrics
          <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Metrics','zero', true)" style="padding:0 3px">all</a>]</b>
        </h3>
        <div class="checkbox-wrapper1">
          <div class="checkbox-item">
            <input type="checkbox" id="Metrics-zero/MAE" onchange="handleChildCheckboxChange(event)" class="checkbox-Metrics-zero">
            <label>MAE</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Metrics-zero/MSE" onchange="handleChildCheckboxChange(event)" class="checkbox-Metrics-zero">
            <label>MSE</label>
          </div>
        </div>
      </div>
    </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div class="category" style="margin-bottom:0px">
            <h3>
              <input type="checkbox" id="select-all-Horizons-zero" style='display:none' onchange="toggleCategory('Horizons', this.checked)">
              Forecasting Horizons
              <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Horizons','zero', true)" style="padding:0 3px">all</a>|<a href="javascript:void(0);" onclick="toggleCategory('Horizons','zero', false)" style="padding:0 3px">off</a>]</b>
            </h3>
            <div class="checkbox-wrapper2" style='grid-template-columns: 1.5fr;'>
              <div class="checkbox-item">
                <input type="checkbox" id="Horizons-zero/96" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-zero">
                <label for="Horizons/96">96</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="Horizons-zero/192" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-zero">
                <label for="Horizons/192">192</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="Horizons-zero/336" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-zero">
                <label for="Horizons/336">336</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="Horizons-zero/720" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-zero">
                <label for="Horizons/720">720</label>
              </div>
            </div>
          </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <!-- <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div> -->
  </div>
  <div class='right' style="width: 100%;padding: 0px;">
    <div style="width:100%;margin-top: 0;" class="table-container" id='table-container-mul'>
      <table id="zero" class="my-table2">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Model</th>
            <th>Parameters</th>
            <th>Score</th>
            <th>ğŸ¥‡</th>
            <th>ğŸ¥ˆ</th>
            <th>ğŸ¥‰</th>
            <th>Paper</th>
            <th>Publication</th>
            <th>Year</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <div style="margin-top:70px;">
      <div  id="dataset-container-mul-down">
        <!-- <div class="checkbox-container1" id="dataset-container-mul-down"> -->
        </div>
        <!-- <div style='width:50%'>
          <hr style="border:1px dashed #ddd">
        </div> -->
      </div>
  </div>
</div>
    <div id='all-zero' style='margin-top:-70px'>
      <div class='checkbox-container'>
        <div class="all-checkbox">
          <input type="checkbox" id="select-all" onclick="toggleSelectAll(this.checked,'zero')" style="display:none">
          <label for="select-all">
            <h3 style="white-space:nowrap">Datasets
              <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleSelectAll(true,'zero')" style="padding:0 3px">all</a>|<a href="javascript:void(0);" onclick="toggleSelectAll(false,'zero')" style="padding:0 3px">off</a>]</b>
            </h3>
          </label>
        </div>
      </div>
      <div class="checkbox-container" id="dataset-container-zero" style=' gap:3px; margin-top: -10px;padding-right:0px;grid-template-columns: 1fr 1fr 1fr 1fr 1fr;'></div>
    </div>
<div class="" id="dataset-container-mul-down1">
          <div class="category" style="margin-bottom:0px">
            <h3>
              <input type="checkbox" id="select-all-Score-zero" style='display:none' onchange="toggleCategory('Score','zero', this.checked)">
              Score
            </h3>
            <div class="checkbox-wrapper3" style=' display: flex;gap:10px;'>
              <div class="checkbox-item">
                <input type="radio" id="Score-zero/1" value="Score/1" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-zero">
                <label for="Score/1">ğŸ¥‡</label>
              </div>
              <div class="checkbox-item">
                <input type="radio" id="Score-zero/2" value="Score/2" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-zero">
                <label for="Score/2">ğŸ¥‡ + ğŸ¥ˆ + ğŸ¥‰</label>
              </div>
              <div class="checkbox-item" style="flex-wrap:nowrap;">
                <input type="radio" id="Score-zero/3" value="Score/3" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-zero">
                <label for="Score/3">
                <input type="number" id="score-zero/3/1" name="score/3/1" value="3" oninput="validateInput(this)"> Ã— ğŸ¥‡ + 
                <input type="number" id="score-zero/3/2" name="score/3/2" value="2" oninput="validateInput(this)"> Ã— ğŸ¥ˆ + 
                <input type="number" id="score-zero/3/3" name="score/3/3" value="1" oninput="validateInput(this)"> Ã— ğŸ¥‰</label>
              </div>
            </div>
          </div>
        </div>
<div style="height:30px"></div>

<h3 id="Rules"><a href="#Rules" class="headerlink" title="Rules:"></a>Rules:</h3><ul>
<li><p>Specific models require training on data of each specific scenario, and most LLM-based models need fine-tuning of either the LLM backbones or some additional components to adapt to down-stream datasets. Thus, in zero-short evaluation, we focus on time series pre-trained models that are capable of performing zero-shot forecasting.</p>
</li>
<li><p>For time series foundation models, we consider 14 datasets and 2 error metrics, i.e., MAE and MSE. For each dataset, we consider 4 forecasting horizons. We directly use the test set for evaluation (<a href="../../datasets/#Multivariate-time-series">click here</a> for details), <a href="./#Zero-shot-setting-results">click here</a> to see the detailed results, <a href="./zero.csv">click here</a> to download detailed evaluation results for each of the 14 multivariate time series.</p>
</li>
<li><p>For each forecasting algorithm, we count the number of times that the algorithm receives the gold, silver, and bronze medals, i.e., having the lowest, 2nd lowest, and 3rd lowest errors, shown as ğŸ¥‡, ğŸ¥ˆ, and ğŸ¥‰, respectively. </p>
</li>
<li><p>We provide three different types of scores for ranking the forecasting algorithms. First, the scores equal to the numbers of gold medals. Second, the scores are the sum of the numbers of gold, silver, and bronze medals. Third, the scores are the weighted sum of the gold, silver, and bronze medals, where the weights can be customized. The larger the score, the higher the ranking.</p>
</li>
</ul>
<h2 id="Zero-shot-setting-results"><a href="#Zero-shot-setting-results" class="headerlink" title="Zero-shot setting results"></a>Zero-shot setting results</h2><div class="main-container">
  <div style="width:100%;overflow-y:auto;height:800px" class="table-container">
    <table id="display-zero" class="my-table2">
      <thead>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>
MOIRAI flattens all channels into a single dimension for patching, thus limiting its use when dealing with datasets with many channels. MOIRAI fails to work on Traffic (862 channels) and Wike2000 (2000 channels), which is shown with -.

<div style="height:30px"></div>

<h2 id="Leaderboard-for-few-shot-setting"><a href="#Leaderboard-for-few-shot-setting" class="headerlink" title="Leaderboard for few-shot setting"></a>Leaderboard for few-shot setting</h2><div class="main-container" id="main-container-few">
  <div class="checkbox-wrapper">
    <div class="checkbox-container" id="dataset-container-mul-type-few">
      <div class="category" style="margin-bottom:0px;width: 241px;">
        <h3>
          <input type="checkbox" id="select-all-type-few" style='display:none' onchange="toggleCategory('Type','few', this.checked)">
          Model Type
          <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Type','few', true)" style="padding:0 3px">all</a>]</b>
        </h3>
        <div class="checkbox-wrapper1">
          <div class="checkbox-item">
            <input type="checkbox" id="Type-few/Pretrain-Model" onchange="handleChildCheckboxChange(event)" class="checkbox-Type-few">
            <label >TS Pretrain Model</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Type-few/LLM-Based-Model" onchange="handleChildCheckboxChange(event)" class="checkbox-Type-few">
            <label >LLM Based Model</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Type-few/Specific-Model" onchange="handleChildCheckboxChange(event)" class="checkbox-Type-few">
            <label >Specific Model</label>
          </div>
        </div>
      </div>
    </div>
     <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div class="checkbox-container" id="dataset-container-mul-up-few">
      <div class="category" style="margin-bottom:0px">
        <h3>
          <input type="checkbox" id="select-all-Metrics-few" style='display:none' onchange="toggleCategory('Metrics','few', this.checked)">
          Metrics
          <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Metrics','few', true)" style="padding:0 3px">all</a>]</b>
        </h3>
        <div class="checkbox-wrapper1">
          <div class="checkbox-item">
            <input type="checkbox" id="Metrics-few/MAE" onchange="handleChildCheckboxChange(event)" class="checkbox-Metrics-few">
            <label>MAE</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Metrics-few/MSE" onchange="handleChildCheckboxChange(event)" class="checkbox-Metrics-few">
            <label>MSE</label>
          </div>
        </div>
      </div>
    </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div id='all-few'>
      <div class='checkbox-container'>
        <div class="all-checkbox">
          <input type="checkbox" id="select-all" onclick="toggleSelectAll(this.checked,'few')" style="display:none">
          <label for="select-all">
            <h3 style="white-space:nowrap">Datasets
              <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleSelectAll(true,'few')" style="padding:0 3px">all</a>|<a href="javascript:void(0);" onclick="toggleSelectAll(false,'few')" style="padding:0 3px">off</a>]</b>
            </h3>
          </label>
        </div>
      </div>
      <div class="checkbox-container" id="dataset-container-few"></div>
    </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div class="checkbox-container1" id="dataset-container-mul-down">
      <div class="category" style="margin-bottom:0px">
        <h3>
          <input type="checkbox" id="select-all-Horizons-few" style='display:none' onchange="toggleCategory('Horizons', this.checked)">
          Forecasting Horizons
          <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Horizons','few', true)" style="padding:0 3px">all</a>|<a href="javascript:void(0);" onclick="toggleCategory('Horizons','few', false)" style="padding:0 3px">off</a>]</b>
        </h3>
        <div class="checkbox-wrapper2">
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-few/96" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-few">
            <label for="Horizons/96">96</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-few/192" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-few">
            <label for="Horizons/192">192</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-few/336" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-few">
            <label for="Horizons/336">336</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-few/720" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-few">
            <label for="Horizons/720">720</label>
          </div>
        </div>
      </div>
    </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div class="checkbox-container1" id="dataset-container-mul-down1">
      <div class="category" style="margin-bottom:0px">
        <h3>
          <input type="checkbox" id="select-all-Score-few" style='display:none' onchange="toggleCategory('Score','few', this.checked)">
          Score
        </h3>
        <div class="checkbox-wrapper3">
          <div class="checkbox-item">
            <input type="radio" id="Score-few/1" value="Score/1" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-few">
            <label for="Score/1">ğŸ¥‡</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="Score-few/2" value="Score/2" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-few">
            <label for="Score/2">ğŸ¥‡ + ğŸ¥ˆ + ğŸ¥‰</label>
          </div>
          <div class="checkbox-item" style="flex-wrap:nowrap;">
            <input type="radio" id="Score-few/3" value="Score/3" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-few">
            <label for="Score/3">
            <input type="number" id="score-few/3/1" name="score/3/1" value="3" oninput="validateInput(this)"> Ã— ğŸ¥‡ + 
            <input type="number" id="score-few/3/2" name="score/3/2" value="2" oninput="validateInput(this)"> Ã— ğŸ¥ˆ + 
            <input type="number" id="score-few/3/3" name="score/3/3" value="1" oninput="validateInput(this)"> Ã— ğŸ¥‰</label>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div style="width:100%;margin-top: 0;" class="table-container" id='table-container-mul'>
    <table id="few" class="my-table2">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Model</th>
          <th>Parameters</th>
          <th>Score</th>
          <th>ğŸ¥‡</th>
          <th>ğŸ¥ˆ</th>
          <th>ğŸ¥‰</th>
          <th>Paper</th>
          <th>Publication</th>
          <th>Year</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>


<h3 id="Rules-1"><a href="#Rules-1" class="headerlink" title="Rules:"></a>Rules:</h3><ul>
<li><p>For short-term time series datasets like ILI, the sample size under the 5% sampling condition is insufficient to support fine-tuning of the foundation model. Therefore, we only conduct tests on long-term time series datasets. </p>
</li>
<li><p>For time series foundation models, we consider 10 datasets and 2 error metrics, i.e., MAE and MSE. For each dataset, we consider 4 forecasting horizons. We default to uniformly sampling 5% of the samples from the training set for model fine-tuning and evaluation on test set. <a href="./#Few-shot-setting-results">Click here</a> to see the detailed results, <a href="./few.csv">click here</a> to download detailed evaluation results for each of the 10 multivariate time series.</p>
</li>
<li><p>For each forecasting algorithm, we count the number of times that the algorithm receives the gold, silver, and bronze medals, i.e., having the lowest, 2nd lowest, and 3rd lowest errors, shown as ğŸ¥‡, ğŸ¥ˆ, and ğŸ¥‰, respectively. </p>
</li>
<li><p>We provide three different types of scores for ranking the forecasting algorithms. First, the scores equal to the numbers of gold medals. Second, the scores are the sum of the numbers of gold, silver, and bronze medals. Third, the scores are the weighted sum of the gold, silver, and bronze medals, where the weights can be customized. The larger the score, the higher the ranking.</p>
</li>
</ul>
<h2 id="Few-shot-setting-results"><a href="#Few-shot-setting-results" class="headerlink" title="Few-shot setting results"></a>Few-shot setting results</h2><div class="main-container">
  <div style="width:100%;overflow-y:auto;height:800px" class="table-container">
    <table id="display-few" class="my-table2">
      <thead>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>
The maximum training duration was constrained to a maximum of 5 hours. Models that exceeded this threshold are represented with â€“.

<div style="height:30px"></div>

<h2 id="Leaderboard-for-full-shot-setting"><a href="#Leaderboard-for-full-shot-setting" class="headerlink" title="Leaderboard for full-shot setting"></a>Leaderboard for full-shot setting</h2><div class="main-container" id="main-container-full">
  <div class="checkbox-wrapper">
    <div class="checkbox-container" id="dataset-container-mul-type-full">
      <div class="category" style="margin-bottom:0px;width: 241px;">
        <h3>
          <input type="checkbox" id="select-all-type-full" style='display:none' onchange="toggleCategory('Type','full', this.checked)">
          Model Type
          <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Type','full', true)" style="padding:0 3px">all</a>]</b>
        </h3>
        <div class="checkbox-wrapper1">
          <div class="checkbox-item">
            <input type="checkbox" id="Type-full/Pretrain-Model" onchange="handleChildCheckboxChange(event)" class="checkbox-Type-full">
            <label >TS Pretrain Model</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Type-full/LLM-Based-Model" onchange="handleChildCheckboxChange(event)" class="checkbox-Type-full">
            <label >LLM Based Model</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Type-full/Specific-Model" onchange="handleChildCheckboxChange(event)" class="checkbox-Type-full">
            <label >Specific Model</label>
          </div>
        </div>
      </div>
    </div>
     <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div class="checkbox-container" id="dataset-container-mul-up-full">
      <div class="category" style="margin-bottom:0px">
        <h3>
          <input type="checkbox" id="select-all-Metrics-full" style='display:none' onchange="toggleCategory('Metrics','full', this.checked)">
          Metrics
          <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Metrics','full', true)" style="padding:0 3px">all</a>]</b>
        </h3>
        <div class="checkbox-wrapper1">
          <div class="checkbox-item">
            <input type="checkbox" id="Metrics-full/MAE" onchange="handleChildCheckboxChange(event)" class="checkbox-Metrics-full">
            <label>MAE</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Metrics-full/MSE" onchange="handleChildCheckboxChange(event)" class="checkbox-Metrics-full">
            <label>MSE</label>
          </div>
        </div>
      </div>
    </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div id='all-full'>
      <div class='checkbox-container'>
        <div class="all-checkbox">
          <input type="checkbox" id="select-all" onclick="toggleSelectAll(this.checked,'full')" style="display:none">
          <label for="select-all">
            <h3 style="white-space:nowrap">Datasets
              <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleSelectAll(true,'full')" style="padding:0 3px">all</a>|<a href="javascript:void(0);" onclick="toggleSelectAll(false,'full')" style="padding:0 3px">off</a>]</b>
            </h3>
          </label>
        </div>
      </div>
      <div class="checkbox-container" id="dataset-container-full"></div>
    </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div class="checkbox-container1" id="dataset-container-mul-down">
      <div class="category" style="margin-bottom:0px">
        <h3>
          <input type="checkbox" id="select-all-Horizons-full" style='display:none' onchange="toggleCategory('Horizons', this.checked)">
          Forecasting Horizons
          <b style="font: 16px 'Microsoft YaHei', Verdana, sans-serif; font-weight:bold">Â [<a href="javascript:void(0);" onclick="toggleCategory('Horizons','full', true)" style="padding:0 3px">all</a>|<a href="javascript:void(0);" onclick="toggleCategory('Horizons','full', false)" style="padding:0 3px">off</a>]</b>
        </h3>
        <div class="checkbox-wrapper2">
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-full/96" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-full">
            <label for="Horizons/96">96</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-full/192" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-full">
            <label for="Horizons/192">192</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-full/336" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-full">
            <label for="Horizons/336">336</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="Horizons-full/720" onchange="handleChildCheckboxChange(event)" class="checkbox-Horizons-full">
            <label for="Horizons/720">720</label>
          </div>
        </div>
      </div>
    </div>
    <div style='width:95%'>
      <hr style="border:1px dashed #ddd">
    </div>
    <div class="checkbox-container1" id="dataset-container-mul-down1">
      <div class="category" style="margin-bottom:0px">
        <h3>
          <input type="checkbox" id="select-all-Score-full" style='display:none' onchange="toggleCategory('Score','full', this.checked)">
          Score
        </h3>
        <div class="checkbox-wrapper3">
          <div class="checkbox-item">
            <input type="radio" id="Score-full/1" value="Score/1" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-full">
            <label for="Score/1">ğŸ¥‡</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="Score-full/2" value="Score/2" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-full">
            <label for="Score/2">ğŸ¥‡ + ğŸ¥ˆ + ğŸ¥‰</label>
          </div>
          <div class="checkbox-item" style="flex-wrap:nowrap;">
            <input type="radio" id="Score-full/3" value="Score/3" onchange="handleChildCheckboxChange(event)" class="checkbox-Score-full">
            <label for="Score/3">
            <input type="number" id="score-full/3/1" name="score/3/1" value="3" oninput="validateInput(this)"> Ã— ğŸ¥‡ + 
            <input type="number" id="score-full/3/2" name="score/3/2" value="2" oninput="validateInput(this)"> Ã— ğŸ¥ˆ + 
            <input type="number" id="score-full/3/3" name="score/3/3" value="1" oninput="validateInput(this)"> Ã— ğŸ¥‰</label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div style="width:100%;margin-top: 0;" class="table-container" id='table-container-mul'>
    <table id="full" class="my-table2">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Model</th>
          <th>Parameters</th>
          <th>Score</th>
          <th>ğŸ¥‡</th>
          <th>ğŸ¥ˆ</th>
          <th>ğŸ¥‰</th>
          <th>Paper</th>
          <th>Publication</th>
          <th>Year</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>

<div style="height:20px"></div>

<h3 id="Rules-2"><a href="#Rules-2" class="headerlink" title="Rules:"></a>Rules:</h3><ul>
<li><p>Since full-shot training on some foundation models may take substantially long time, which violates the original intention of the foundation models, we only select several representative foundation models that are more efficient in training in the full-shot setting. </p>
</li>
<li><p>For time series foundation models, we consider 6 datasets and 2 error metrics, i.e., MAE and MSE. For each dataset, we consider 4 forecasting horizons. <a href="./#Full-shot-setting-results">Click here</a> to see the detailed results, <a href="./full.csv">click here</a> to download detailed evaluation results for each of the 6 multivariate time series.</p>
</li>
<li><p>For each forecasting algorithm, we count the number of times that the algorithm receives the gold, silver, and bronze medals, i.e., having the lowest, 2nd lowest, and 3rd lowest errors, shown as ğŸ¥‡, ğŸ¥ˆ, and ğŸ¥‰, respectively. </p>
</li>
<li><p>We provide three different types of scores for ranking the forecasting algorithms. First, the scores equal to the numbers of gold medals. Second, the scores are the sum of the numbers of gold, silver, and bronze medals. Third, the scores are the weighted sum of the gold, silver, and bronze medals, where the weights can be customized. The larger the score, the higher the ranking.</p>
</li>
</ul>
<h2 id="Full-shot-setting-results"><a href="#Full-shot-setting-results" class="headerlink" title="Full-shot setting results"></a>Full-shot setting results</h2><div class="main-container">
  <div style="width:100%;overflow-y:auto;height:800px" class="table-container">
    <table id="display-full" class="my-table2">
      <thead>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>

<script>

model_type = {'Pretrain-Model':['TimesFM','Timer','UniTS','TTM','MOIRAI','ROSE','Moment'],
              'LLM-Based-Model':['GPT4TS',	'UniTime',	'S2IPLLM',	'TimeLLM'],
              'Specific-Model':['PatchTST','Dlinear','FITS','iTransformer','FedFormer','TimesNet','TimeMixer']}

all_data = {'zero':{'method':{},'dataset':[],'metric':[],'result':{}},
'few':{'method':{},'dataset':[],'metric':[],'result':{}},
'full':{'method':{},'dataset':[],'metric':[],'result':{}}}

settings = ['zero','few','full']

settings.forEach( setting =>{

  fetch(`./${setting}.csv`)
    .then(response => response.text())
    .then(text => Papa.parse(text, {
        header: true,
        dynamicTyping: true,
        complete:function(results){
            for (let i1 = 1; i1 < 4; i1++) {
                const scoreBox = document.getElementById(`Score-${setting}/${i1}`);
                scoreBox.checked = false;
            }
            button = document.getElementById(`Score-${setting}/1`);
            button.checked=true
            phraseInputTable(results.data, setting)
            toggleCategory('Metrics',setting, true,false)
            toggleCategory('Type',setting, true,false)
            toggleCategory('Horizons',setting, true,false)
            // è®¾ç½®è¯„åˆ†é€‰é¡¹
            toggleSelectAll(true,setting)
            display(setting)
        } 
    }));

})

function display(setting){
    table = `display-${setting}`;
    const tableHeadr = document.getElementById(table).getElementsByTagName('thead')[0];
    const tableBody = document.getElementById(table).getElementsByTagName('tbody')[0];
    const rowHeadr1 = document.createElement('tr');
    const rowHeadr2 = document.createElement('tr');
    const rowHeadr3 = document.createElement('tr');

    result = Object.values(all_data[setting]['result'])
    result.sort((a,b)=>{
      if(a['Dataset-Quantity-metrics'].split('-')[0] != b['Dataset-Quantity-metrics'].split('-')[0])
        return a<b

      if(a['Dataset-Quantity-metrics'].split('-')[1] == b['Dataset-Quantity-metrics'].split('-')[1])
        return a<b

      return Number(a['Dataset-Quantity-metrics'].split('-')[1]) > Number(b['Dataset-Quantity-metrics'].split('-')[1])
      })

    //draw table head
    method = Object.keys(result[0])
    td1 = document.createElement('td');
    td1.innerHTML='Model'
    td1.rowSpan=2
    td1.colSpan=2
    td1.style='font-weight:bold;left:0;background-color:#f2f2f2;top:0;z-index:3;'
    td1.className='sticky-col-header sticky-col2'
    rowHeadr1.appendChild(td1)
    td2 = document.createElement('td');
    td2.innerHTML='Metrics'
    td2.colSpan=2
    td2.style='font-weight:bold;left:0;background-color:#f2f2f2;top:63.4px;z-index:3;'
    td2.className='sticky-col-header sticky-col2'
    rowHeadr3.appendChild(td2)
    method = method.filter(a=>(a!='Dataset-Quantity-metrics')&&(Object.keys(all_data[setting]['method']).includes(a)))
    method.sort((b,a)=>all_data[setting]['method'][a].year-all_data[setting]['method'][b].year)
    method.forEach(key=>{
        td1 = document.createElement('td');
        td1.innerHTML=key
        td1.colSpan=2
        td1.style='font-weight:bold'
        rowHeadr1.appendChild(td1)

        td2 = document.createElement('td');
        td2.innerHTML=all_data[setting]['method'][key].year
        td2.style='padding:0;font-weight:bold;'
        td2.colSpan=2
        rowHeadr2.appendChild(td2)
        
        td3 = document.createElement('td');
        td3.innerHTML='MSE'
        td3.style='font-weight:bold'
        td4 = document.createElement('td');
        td4.innerHTML='MAE'
        td4.style='font-weight:bold'
        rowHeadr3.appendChild(td3)
        rowHeadr3.appendChild(td4)
    })

    rowHeadr1.style='background-color:#f2f2f2;font-weight:bold;top:0;z-index: 3;'
    rowHeadr1.className='sticky-th'
    rowHeadr2.style='background-color:#f2f2f2;padding: 0px;height: 25px;font-size: 14px;font-weight:bold;top:38.4px;'
    rowHeadr2.className='sticky-th'
    rowHeadr3.style='background-color:#f2f2f2;font-weight:bold;top:63.4px;box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 3px -2px;'
    rowHeadr3.className='sticky-th'
    tableHeadr.appendChild(rowHeadr1)
    tableHeadr.appendChild(rowHeadr2)
    tableHeadr.appendChild(rowHeadr3)

    // draw table body
    for(let i=0;i<result.length;i=i+8)
    {
      const row1 = document.createElement('tr');
      const row2 = document.createElement('tr');
      const row3 = document.createElement('tr');
      const row4 = document.createElement('tr');

      td = document.createElement('td');
      td.innerHTML=result[i]['Dataset-Quantity-metrics'].split('-')[0].split('/')[1]
      td.className='sticky-col-header sticky-col2'
      td.rowSpan  = 4
      
      if(i/8%2==0)
      { 
        td.style=' writing-mode: vertical-rl; transform: rotate(180deg);margin:auto;text-rendering: geometricPrecision; -webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale; width: 20px;background-color:#fff;left:0; '
      }else{
        td.style=' writing-mode: vertical-rl; transform: rotate(180deg);margin:auto;text-rendering: geometricPrecision; -webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale; width: 20px;background-color:#f2f2f2;left:0; '
      }
      row1.appendChild(td)
      rowList=[row1,row2,row3,row4]
      horenzon = ['96','192','336','720']
      for(let j=0;j<rowList.length;j=j+1)
      {
        td_horenzon = document.createElement('td');
        td_horenzon.innerHTML=horenzon[j]
        if(j%2==1)
        {
          td_horenzon.style='background-color:#f2f2f2;left:29.35px;'
        }else
        {
          td_horenzon.style='background-color:#fff;left:29.35px ;'
        }
        td_horenzon.className='sticky-col-header sticky-col2'
        rowList[j].appendChild(td_horenzon)
        rowData1 = result[i+2*j]
        method.sort((a,b)=>{
          if (rowData1[a] == '-')
            return 1
          if (rowData1[b] == '-')
            return -1
          return rowData1[a] - rowData1[b]
          })
        sort1 = structuredClone(method)
        rowData2 = result[i+2*j+1]
        method.sort((a,b)=>{
          if (rowData2[a] == '-')
            return 1
          if (rowData2[b] == '-')
            return -1
          return rowData2[a] - rowData2[b]})
        sort2 = structuredClone(method)
        Object.keys(rowData1).forEach(key=>{
          if (key!='Dataset-Quantity-metrics'){
            td1 = document.createElement('td');
            td1.innerHTML = processData(rowData1,key,sort1)
            rowList[j].appendChild(td1)
            td2 = document.createElement('td');
            td2.innerHTML = processData(rowData2,key,sort2)
            rowList[j].appendChild(td2)
          }
        })
        tableBody.appendChild(rowList[j])
      }
    }
}

function processData(rowData,key,sort)
{
  input = rowData[key]
  if(input=='-')
  return input
  if (key==sort[0])
  {
    return `<b> ${parseFloat(input).toFixed(3)} </b>`;
  }else if(key==sort[1])
  {
    return `<p class="double-underline"> ${parseFloat(input).toFixed(3)}</p>`;
  }else if(key==sort[2])
  {
    return `<u> ${parseFloat(input).toFixed(3)} </u>`;
  }else
  {
    return `${parseFloat(input).toFixed(3)}`;
  }
}

function phraseInputTable(input,setting)
{   
    //phrase method
    keys = Object.keys(input[9]).filter(item => item != 'Dataset-Quantity-metrics');
    keys.forEach(name=>{
      contact_text = input[0][name]?input[0][name]:''
      contact_url = input[1][name]
      paper_url = input[2][name]
      code_url = input[3][name]
      publication = input[4][name]
      bib = input[5][name]
      year = input[6][name]
      parameters = input[7][name]
      all_data[setting]['method'][name]={contact_text,contact_url,paper_url,code_url,publication,bib,year,parameters}
    })

    //phrase result
    for(let i = 8;i<input.length;i++)
    {
      if(!input[i]['Dataset-Quantity-metrics'])
        continue;
      let [data, horizon, metric] = input[i]['Dataset-Quantity-metrics'].split('-')

      if(!all_data[setting]['dataset'].includes(data))
      {
        all_data[setting]['dataset'].push(data)
      }
      if(!all_data[setting]['metric'].includes(metric))
      {
        all_data[setting]['metric'].push(metric)
      }
      all_data[setting]['result'][input[i]['Dataset-Quantity-metrics']]=input[i]
    }

    //draw dataset
    const container = document.getElementById('dataset-container-'+setting);
    const groupedDatasets = {};
    all_data[setting]['dataset'].forEach(dataset => {
        let [category, name] = dataset.split('/');
        if (!groupedDatasets[category]) {
            groupedDatasets[category] = [];
        }
        groupedDatasets[category].push(name);
    });
    var sortedCategories = []
    if (setting!='zero')
    {
      sortedCategories = Object.keys(groupedDatasets).sort((a, b) => groupedDatasets[b].length - groupedDatasets[a].length);
    }
    else
    {
      sortedCategories = ['Traffic','Energy','Environment','Economic','Nature','Health','Stock','Banking','Web','Electricity']
    }
    sortedCategories.forEach(category => {
        const categoryDiv = document.createElement('div');
        categoryDiv.className = 'category';
        const categoryLabel = document.createElement('h3');
        const categoryCheckbox = document.createElement('input');
        categoryCheckbox.type = 'checkbox';
        categoryCheckbox.id = `select-all-${category}-${setting}`;
        categoryCheckbox.addEventListener('change', () => toggleCategory(category,setting, categoryCheckbox.checked));
        categoryLabel.appendChild(categoryCheckbox);
        categoryLabel.appendChild(document.createTextNode(` ${category}`));
        categoryDiv.appendChild(categoryLabel);
        const d = document.createElement('div');
        groupedDatasets[category].forEach(name => {
            name = name.replace('_', '-');
            const div = document.createElement('div');
            div.className = 'checkbox-item';
            if(category=='Electricity'&&setting=='zero')
            {
              d.style='display:flex'
              div.style='display:flex'
            }
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = `${category}-${setting}/${name}`;
            checkbox.value = `${category}-${setting}/${name}`;
            checkbox.className = `checkbox-${category}-${setting}`;
            checkbox.addEventListener('change', handleChildCheckboxChange);
            const label = document.createElement('label');
            label.htmlFor = `${category}/${name}`;
            label.textContent = name;
            div.appendChild(checkbox);
            div.appendChild(label);
            d.appendChild(div);
            categoryDiv.appendChild(d);
        });
        container.appendChild(categoryDiv);
    });}

function updateParentCheckbox(category,setting) {
  if(category.includes('Type'))
  return
    const checkboxes = document.querySelectorAll(`.checkbox-${category}-${setting}`);
    const allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);
    document.getElementById(`select-all-${category}-${setting}`).checked = allChecked;
}

function handleChildCheckboxChange(event) {
    const checkbox = event.target;
    const category = checkbox.className.split('-')[1];
    const setting = checkbox.className.split('-')[2];
    if (category != 'Score')
    {
        updateParentCheckbox(category,setting);        
    }
    else
    {
        checkbox.checked = true
        var id = checkbox.value
        for (let i1 = 1; i1 < 4; i1++) {
            const scoreBox = document.getElementById(`Score-${setting}/${i1}`);
            if (scoreBox.value!=id) {
                scoreBox.checked = false;
            }
        }
    }
    submitSelection(setting); 
}

function toggleCategory (category,setting, isChecked, flush=true) {

    const checkbox = document.getElementById('select-all-' + category + '-' + setting);
    const checkboxes = document.querySelectorAll(`.checkbox-${category + '-' + setting}`);
    checkboxes.forEach(checkbox => {
        checkbox.checked = isChecked;
    });
    if(flush)
    submitSelection(setting);  
}

function toggleSelectAll(selectAllCheckbox,setting) {
    const container = document.getElementById('all-'+setting);
    const checkboxes = container.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(checkbox => {
        checkbox.checked = selectAllCheckbox;
    });
    submitSelection(setting);
}

function submitSelection(setting){
    query_check_boxs = document.querySelectorAll(`*[class*="${setting}"]`);
    select_types=[]
    select_Metrics=[]
    select_Horizons=[]
    select_datasets=[]
    select_score=null
    query_check_boxs.forEach(checkbox=>{
       if(checkbox.checked)
       {
          if(checkbox.id.includes('Type'))
          {
            select_types.push(checkbox.id.split('/')[1].trim())
          }
          else if(checkbox.id.includes('Metrics'))
          {
            select_Metrics.push(checkbox.id.split('/')[1])
          }else if(checkbox.id.includes('Score'))
          {
            select_score = checkbox.id.split('/')[1].split('-')[0]
          }
          else if(checkbox.id.includes('Horizons'))
          {
            select_Horizons.push(checkbox.id.split('/')[1])
          }else
          {
            select_datasets.push(checkbox.id.split('-')[0]+'/'+checkbox.id.split('/')[1])
          }
       }
    })

// Banking/NN5-192-mae
    rank={}
    select_method=[]
    if (setting=='zero')
    {
      filteredKeys = ['TimesFM','Timer','UniTS','TTM','MOIRAI','ROSE']
    }
    else
    { 
        if (select_types.length==0)
        {
          select_types  =Â ['Pretrain-Model', 'LLM-Based-Model', 'Specific-Model']
          select_datasets = []
        }
        select_types.forEach( type=>{
          if (select_method)
          select_method +=','
          select_method += model_type[type]
        })
        select_method = select_method.split(',')
        filteredKeys = select_method.filter(method => Object.keys(all_data[setting]['method']).includes(method));

    }
    filteredKeys.forEach(method=>{
          rank[method]={'rank1':0,'rank2':0,'rank3':0,'score':0}
        })
    select_Metrics.forEach(metirc=>{
      select_Horizons.forEach(horizon=>{
        select_datasets.forEach(dataset=>{
                result = all_data[setting]['result'][`${dataset}-${horizon}-${metirc.toLowerCase()}`]
                sortedKeys = filteredKeys.sort((a, b) => result[a] - result[b]);
                rank[sortedKeys[0]]['rank1']+=1
                rank[sortedKeys[1]]['rank2']+=1
                rank[sortedKeys[2]]['rank3']+=1
        })
      })
    })
    draw=[]
    text3 = document.getElementById(`score-${setting}/3/3`)
    Object.keys(rank).forEach(method=>{
        if(select_score==3)
        {
            weight1 = document.getElementById(`score-${setting}/3/1`).value
            weight2 = document.getElementById(`score-${setting}/3/2`).value
            weight3 = document.getElementById(`score-${setting}/3/3`).value
            rank[method]['score'] = rank[method]['rank1'] * weight1 + rank[method]['rank2'] * weight2 + rank[method]['rank3'] * weight3
        }
        else if(select_score == 2){
            rank[method]['score'] = rank[method]['rank1'] + rank[method]['rank2'] + rank[method]['rank3']
        }else
        {
            rank[method]['score'] = rank[method]['rank1']
        }
        draw.push({method,'score':rank[method]['score'],'rank1':rank[method]['rank1'],'rank2':rank[method]['rank2'],'rank3':rank[method]['rank3']})
    })

    draw.sort((b, a)=>{
      if(a['score']!=b['score'])
      return a.score-b.score
      if (a.rank1!=b.rank1)
        return a.rank1-b.rank1
      if (a.rank2!=b.rank2)
        return a.rank2-b.rank2
      if (a.rank3!=b.rank3)
        return a.rank3-b.rank3
    })
    draw_table(draw,setting)
 }

function formatNumber(num) {
  return (num / 1e6).toFixed(2) + 'M';
    // if (num >= 1e9) {
    //     return (num / 1e9).toFixed(1) + 'B';  // è¡¨ç¤ºåäº¿
    // } else if (num >= 1e6) {
    //     return (num / 1e6).toFixed(1) + 'M';  // è¡¨ç¤ºç™¾ä¸‡
    // } else if (num >= 1e3) {
    //     return (num / 1e3).toFixed(1) + 'K';  // è¡¨ç¤ºåƒ
    // } else {
    //     return num.toString();  // å°äºåƒçš„æ•°å­—
    // }
}

function draw_table(draw,setting)
{
  // Rank 	Model 	Score 	ğŸ¥‡ 	ğŸ¥ˆ 	ğŸ¥‰ 	Paper 	Publication 	Year
    const tbody = document.querySelector(`#${setting} tbody`);
    tbody.innerHTML = ''
    index=0
    draw.forEach(rowData=>{
      index+=1
      const row = document.createElement('tr');
      row.innerHTML = `
            <td>${index}</td>
            <td>${rowData.method}</td>
            <td>
                ${formatNumber(all_data[setting]['method'][rowData.method].parameters)}
            </td>
            <td>${rowData.score}</td>
            <td>${rowData.rank1}</td>
            <td>${rowData.rank2}</td>
            <td>${rowData.rank3}</td>
            <td>
                <a href="${all_data[setting]['method'][rowData.method].paper_url}"  target="_blank">paper</a>
            </td>
            <td>
             ${all_data[setting]['method'][rowData.method].publication} [<a href="${all_data[setting]['method'][rowData.method].bib}" target="_blank">bib</a>]
            </td>
            <td>
                ${all_data[setting]['method'][rowData.method].year}
            </td>
        `;
      tbody.appendChild(row)
    })
}

let lastValidValue = '';
function validateInput(input) {
    let value = input.value;

    // ä¿å­˜å…‰æ ‡ä½ç½®
    const cursorPos = input.selectionStart;
    
    // å¤„ç†æ•´æ•°å’Œå°æ•°éƒ¨åˆ†
    let [integerPart, decimalPart] = value.split('.');
    

    // å¤„ç†æ•´æ•°éƒ¨åˆ†ï¼šå»é™¤å‰å¯¼é›¶å¹¶é™åˆ¶æœ€å¤§ä¸¤ä½æ•°
    
    // å»é™¤å‰å¯¼é›¶
    if (integerPart.length > 1) {
        integerPart = integerPart.replace(/^0+/, ''); 
    }
    
    // å¤„ç†å°æ•°éƒ¨åˆ†ï¼šé™åˆ¶æœ€å¤šä¸¤ä½
    if (decimalPart) {
        decimalPart = decimalPart.slice(0, 2);
    }
    
    // åˆå¹¶æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†
    let newValue = integerPart;
    if (decimalPart) {
        newValue += '.' + decimalPart;
    }
    
    // å¦‚æœå°æ•°ç‚¹åæœ‰æ•°å­—ï¼Œä½†æ˜¯å°æ•°ç‚¹å‰çš„æ•°å­—éƒ¨åˆ†ä¸ºç©ºï¼Œåº”è‡³å°‘æ˜¾ç¤º `0`
    if (newValue === '' || newValue === '.') {
        newValue = '0';
    }
    
    // éªŒè¯å¹¶æ›´æ–°è¾“å…¥å€¼
    if (newValue !== value) {
        input.value = newValue;
    }
    
    // æ›´æ–°æœ€åä¸€ä¸ªæœ‰æ•ˆå€¼
    lastValidValue = input.value;
    
    // æ¢å¤å…‰æ ‡çš„ä½ç½®
    // input.setSelectionRange(cursorPos, cursorPos);
    submitSelection(setting)
}

</script>
<style>
/* åŸºæœ¬è¡¨æ ¼æ ·å¼ */
table.my-table2 {
  width: 100%;
  border-collapse: collapse;
  font-family: Arial, sans-serif;
  border: none; /* å»é™¤è¡¨æ ¼è¾¹æ¡† */
  padding:0;
  margin:0
}

/* è¡¨å¤´æ ·å¼ */
table.my-table2 th {
  background-color: #f2f2f2; /* è¡¨å¤´èƒŒæ™¯è‰²ï¼ˆå¥‡æ•°è¡Œæµ…ç°è‰²ï¼‰ */
  color: black; /* è¡¨å¤´æ–‡å­—é¢œè‰² */
  font-weight: bold; /* è¡¨å¤´å­—ä½“åŠ ç²— */
  padding: 10px; /* è°ƒæ•´è¡¨å¤´å†…è¾¹è· */
  text-align: center; /* å±…ä¸­å¯¹é½ */
   white-space: nowrap; /* é˜²æ­¢æ–‡æœ¬æ¢è¡Œ */
  border: none;
}

/* å¶æ•°è¡ŒèƒŒæ™¯è‰² */
table.my-table2 tr:nth-child(odd) {
  background-color: #ffffff; /* å¶æ•°è¡ŒèƒŒæ™¯è‰²ï¼ˆç™½è‰²ï¼‰ */
}

/* å¥‡æ•°è¡ŒèƒŒæ™¯è‰² */
table.my-table2 tr:nth-child(even) {
  background-color: #f2f2f2; /* å¥‡æ•°è¡ŒèƒŒæ™¯è‰²ï¼ˆæµ…ç°è‰²ï¼‰ */
}

/* å•å…ƒæ ¼æ ·å¼ */
table.my-table2 td {
  padding: 8px; /* è°ƒæ•´å•å…ƒæ ¼å†…è¾¹è· */
  text-align: center; /* å±…ä¸­å¯¹é½ */
  border: none; /* å»é™¤å•å…ƒæ ¼è¾¹æ¡† */
  vertical-align: middle;
  /* white-space: nowrap; é˜²æ­¢æ–‡æœ¬æ¢è¡Œ */
  /* overflow: hidden; éšè—æº¢å‡ºå†…å®¹
  text-overflow: ellipsis; æº¢å‡ºå†…å®¹æ˜¾ç¤ºçœç•¥å· */
  /* max-width: 200px; è®¾ç½®å•å…ƒæ ¼æœ€å¤§å®½åº¦
  position: relative; è®¾ç½®ç›¸å¯¹å®šä½ä»¥æ˜¾ç¤ºæ‚¬åœå†…å®¹ */
}

/* ç¬¬4åˆ—å•ç‹¬æ ·å¼ */
table.my-table2 tr td:nth-child(4) {
  /* max-width: 150px; è®¾ç½®ç¬¬4åˆ—å•å…ƒæ ¼æœ€å¤§å®½åº¦ */
}

/* ç¬¬2åˆ—å•ç‹¬æ ·å¼ */
table.my-table2 tr td:nth-child(2) {
  /* max-width: 80px; è®¾ç½®ç¬¬2åˆ—å•å…ƒæ ¼æœ€å¤§å®½åº¦ */
}

/* ç¬¬7åˆ—å•ç‹¬æ ·å¼ */
table.my-table2 tr td:nth-child(7) {
  /* max-width: 100px; è®¾ç½®ç¬¬7åˆ—å•å…ƒæ ¼æœ€å¤§å®½åº¦ */
}
.table-container {
  width: 100%; /* Adjust width as needed */
  max-width: 100%; /* Ensure it doesn't exceed the container width */
  /* Adjust height as needed */
  overflow-x: auto; /* Enable horizontal scroll */
  overflow-y: hidden; /* Enable vertical scroll */
  padding-left: 0px;
}
.table-container {
  width: 80%; /* Adjust width as needed */
  /* max-width: 100%; Ensure it doesn't exceed the container width */
  /* Adjust height as needed */
  overflow-x: auto; /* Enable horizontal scroll */
  margin:auto;
  overflow-y: hidden; /* Enable vertical scroll */
  display: flex;justify-content: LEFT;
}
 select {
    background-color: #f2f2f2; /* è¡¨å¤´èƒŒæ™¯è‰²ï¼ˆå¥‡æ•°è¡Œæµ…ç°è‰²ï¼‰ */
    color: black; /* è¡¨å¤´æ–‡å­—é¢œè‰² */
    font-weight: bold; /* è¡¨å¤´å­—ä½“åŠ ç²— */
    text-align: center; /* å±…ä¸­å¯¹é½ */
    white-space: nowrap; /* é˜²æ­¢æ–‡æœ¬æ¢è¡Œ */
    border: none;
    margin:auto;
    }
select:focus {
  border: none; /* ç¡®ä¿é€‰ä¸­æ—¶æ²¡æœ‰è¾¹æ¡† */
  outline: none; /* ç¡®ä¿é€‰ä¸­æ—¶æ²¡æœ‰é»‘æ¡† */
}
option
{
    padding:5px,0;
}
.checkbox-item
{
    margin-left:10px;
}
</style>

<style>
.main-container{
    display: flex;
    align-items: stretch; /* Stretch items to the same height */
    height: 100%;
}
.checkbox-container1
{
    display: grid;
    grid-template-columns: 1fr; /* åˆ†ä¸ºä¸¤åˆ— */
    gap: 10px;
    padding-right: 20px; /* Add some space between checkboxes and table */
    overflow-y: auto; /* Enable vertical scroll if needed */
}
.checkbox-container {
 display: grid;
    grid-template-columns: 0.7fr 0.7fr; /* åˆ†ä¸ºä¸¤åˆ— */
    padding-right: 10px; /* Add some space between checkboxes and table */
    overflow-y: auto; /* Enable vertical scroll if needed */
}
.category h3 {
    display: flex;
    align-items: center;
}

.category {
    margin-bottom: 10px;
}
.checkbox-wrapper {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    height: 100%;
    width:fit-content;
}
.article-entry h3{
    margin:0;
    margin-right: 6px;
}
.all-checkbox {
    display: flex;
    align-items: center;
    margin-bottom: 10px; /* åœ¨ "All" å¤é€‰æ¡†å’Œå…¶ä»–å¤é€‰æ¡†ä¹‹é—´æ·»åŠ ä¸€äº›é—´è· */
}
.checkbox-wrapper1 {
    display: grid;
    grid-template-columns: 1fr;
    width:250px;

}

.checkbox-wrapper2 {
    display: grid;
    grid-template-columns: 1.5fr 1.5fr 1.5fr 1.5fr;
    width:260px;

}
.checkbox-wrapper3 {
    display: grid;
    grid-template-columns: 1;
    width:100%;

}
.checkbox-wrapper3 .checkbox-item
{
     margin-left:15px;
     margin-top:10px;
}
input[type="number"] {
    border: none; /* å»æ‰è¾¹æ¡† */
    border-bottom: 1px solid #000; /* åº•éƒ¨æ·»åŠ ä¸€æ¡æ¨ªçº¿ */
    outline: none;
    padding: 0px;
    /* padding-right: 0px;  */
    
    width: 31px;
    font-size:14px;
    /* text-align:right; */
    text-align:center;
}
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
}
input[type="number"]{
    -moz-appearance: textfield;
}

</style>


<style>
.sticky-col{
            background-color: white;
            position: sticky;
            left: 0; /* å›ºå®šåœ¨å·¦ä¾§ */
            z-index: 1;/* è®¾å®šå †å é¡ºåº */
            /* box-shadow: rgba(0, 0, 0, 0.4) -2px 0px 3px -1px; */
        }
/* ç¡®ä¿äº¤å‰å•å…ƒæ ¼çš„å †å é¡ºåº */
.sticky-col-header {
    z-index: 3;
}
.sticky-th {
      position: sticky;
      top: 0; /* å›ºå®šåœ¨é¡¶éƒ¨ */
      z-index: 2; /* è®¾å®šå †å é¡ºåº */
        }
.double-underline {
            position: relative;
            display: inline-block;
            /* font: inherit; ç»§æ‰¿çˆ¶å…ƒç´ çš„å­—ä½“æ ·å¼ */
        }
        .double-underline::after,
        .double-underline::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            height: 1px; /* ä¸‹åˆ’çº¿çš„åšåº¦ */
            background-color: black; /* ä¸‹åˆ’çº¿çš„é¢œè‰² */
        }
        .double-underline::before {
            bottom: 3px; /* ç¬¬ä¸€æ¡ä¸‹åˆ’çº¿çš„ä½ç½® */
        }
        .double-underline::after {
            bottom: 0px; /* ç¬¬äºŒæ¡ä¸‹åˆ’çº¿çš„ä½ç½® */
        }
    .sticky-col2 {
            position: sticky;
            left: 36px; /* æ ¹æ®ç¬¬ä¸€åˆ—çš„å®½åº¦è®¾ç½® */
            z-index: 1;
            background-color: #fff;
        }
.sticky-col2::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0px; /* è°ƒæ•´é˜´å½±ä½ç½® */
    width: 5px;
    height: 105%;
    box-shadow: 2px 0 3px -2px rgba(0, 0, 0, 0.4); /* å³ä¾§é˜´å½± */
}

</style>
      
    
    </div>
    
    
      <footer class="article-footer">
        <!-- <div class="well" style="width:100px; height:30px;"></div>  by blair-->
        
 <!-- by blair add 160724-->
        <!--
        <div style="width:100px; height:30px;"></div> by blair add 160724
        -->
        

      </footer>
    
  </div>
  
    
  
</article>

</section>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 DecisionIntelligence |&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a target="_blank" rel="noopener" href="http://github.com/52binge/hexo-theme-blairos">blairos</a>
    </div>
  </div>
</footer> -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" >
</script>

    






<script src="/OpenTS/js/script.js"></script>


  </div>
  <!-- æŠŠå®ƒæ”¾åœ¨ </body> æ ‡ç­¾ä¹‹å‰ -->
<script>
  // function updateLanguageLink() {
  //   // è·å–é¡µé¢ä¸Šæˆ‘ä»¬è®¾ç½®çš„é‚£ä¸ªé“¾æ¥å…ƒç´ 
  //   const link = document.getElementById('lang-toggle-link');
  //   if (!link) {
  //     // å¦‚æœé¡µé¢ä¸Šæ²¡æœ‰è¿™ä¸ªé“¾æ¥ï¼Œå°±ä»€ä¹ˆéƒ½ä¸åš
  //     return;
  //   }

  //   // è¿™ä¸¤ä¸ªå€¼éœ€è¦å’Œä½ çš„é¡¹ç›®é…ç½®ä¿æŒä¸€è‡´
  //   const DEFAULT_LANG = 'zh-cn'; // ä½ çš„é»˜è®¤è¯­è¨€ï¼Œå¯èƒ½æ˜¯ 'zh' æˆ– 'zh-cn'
  //   const SECOND_LANG = 'en';

  //   // ä¸å†ä½¿ç”¨ page.pathï¼Œè€Œæ˜¯ä½¿ç”¨æµè§ˆå™¨å½“å‰çœŸå®çš„ URL
  //   const currentPathname = window.location.pathname;
    
  //   // ä» config ä¸­è·å–ç«™ç‚¹çš„æ ¹ç›®å½•ï¼Œä»¥ä¾¿æ­£ç¡®æ‹¼æ¥ URL
  //   // hexo.config.root é€šå¸¸æ˜¯ '/' æˆ–è€… '/your-repo-name/'
  //   const root = '/OpenTS/';
  //   // console.log(currentPathname)
  //   // console.log(root)
  //   let targetPath;

  //   // åˆ¤æ–­å½“å‰ URL æ˜¯å¦ä»¥ /en/ å¼€å¤´
  //   if (currentPathname.startsWith(root + SECOND_LANG + '/')) {
  //     // å½“å‰æ˜¯è‹±æ–‡é¡µ, ç›®æ ‡æ˜¯ä¸­æ–‡é¡µ
  //     // e.g., /en/get-started/ -> /get-started/
  //     const pathWithoutLang = currentPathname.substring((root + SECOND_LANG).length);
  //     targetPath = root.slice(0, -1) + '/' + DEFAULT_LANG +  pathWithoutLang; // æ‹¼æ¥è·¯å¾„
  //   } else if(currentPathname.startsWith(root + DEFAULT_LANG + '/')){
  //     const pathWithoutLang = currentPathname.substring((root + DEFAULT_LANG).length);
  //     targetPath = root.slice(0, -1) + '/' + 'en' +  pathWithoutLang; // æ‹¼æ¥è·¯å¾„
  //   } 
  //   else {
  //     // å½“å‰æ˜¯ä¸­æ–‡é¡µ, ç›®æ ‡æ˜¯è‹±æ–‡é¡µ
  //     // e.g., /get-started/ -> /en/get-started/
  //     const pathWithoutRoot = currentPathname.substring(root.length);
  //     targetPath = root + SECOND_LANG + '/' + pathWithoutRoot;
  //   }

  //   // æ›´æ–°é“¾æ¥çš„ href å±æ€§
  //   link.href = targetPath;
  // }

  // // ç›‘å¬ Pjax åŠ è½½å®Œæˆäº‹ä»¶
  // // æ³¨æ„ï¼šäº‹ä»¶åå¯èƒ½æ˜¯ 'pjax:end', 'pjax:complete' ç­‰ï¼Œå–å†³äºä¸»é¢˜ç”¨çš„åº“
  // // ä½ å¯ä»¥åœ¨ä¸»é¢˜çš„ JS æ–‡ä»¶é‡Œæœç´¢ 'pjax' æ¥ç¡®è®¤
  // document.addEventListener('pjax:end', updateLanguageLink);

  // // é¡µé¢é¦–æ¬¡åŠ è½½æ—¶ä¹Ÿæ‰§è¡Œä¸€æ¬¡
  // document.addEventListener('DOMContentLoaded', updateLanguageLink);
  function updateLanguageUI() {
    const root = '/OpenTS/';
    const DEFAULT_LANG = 'en';
    const SECOND_LANG = 'zh-cn';
    const currentPathname = window.location.pathname;

    // --- 1. æ›´æ–° Body Class æ¥åˆ‡æ¢èœå• ---
    const isEnglishPage = currentPathname.startsWith(root + SECOND_LANG + '/');
    
    if (isEnglishPage) {
      document.body.classList.add('lang-zh-cn');
      document.body.classList.remove('lang-en');
    } else {

      document.body.classList.add('lang-en');
      document.body.classList.remove('lang-zh-cn');
    }

    // --- 2. æ›´æ–°è¯­è¨€åˆ‡æ¢é“¾æ¥çš„ href (æ–°é€»è¾‘) ---
    let linkToUpdate;
    let targetPath;

    if (isEnglishPage) {
      // åœ¨è‹±æ–‡é¡µï¼Œè‹±æ–‡èœå•å¯è§ã€‚æˆ‘ä»¬éœ€è¦æ›´æ–°å®ƒé‡Œé¢çš„é‚£ä¸ªåˆ‡æ¢å™¨ã€‚
      // linkToUpdate = document.getElementById('main-nav');
      linkToUpdate = document.getElementById('lang-toggle-link-zh-cn');
      // ç›®æ ‡æ˜¯ä¸­æ–‡é¡µ (ä¸å¸¦è¯­è¨€å‰ç¼€)
      const pathWithoutLang = currentPathname.substring((root + SECOND_LANG).length);
      targetPath = (root.endsWith('/') ? root.slice(0, -1) : root)  + '/' + DEFAULT_LANG + pathWithoutLang;
      if (targetPath === '') targetPath = '/';

    } else {
      // åœ¨ä¸­æ–‡é¡µï¼Œä¸­æ–‡èœå•å¯è§ã€‚æˆ‘ä»¬éœ€è¦æ›´æ–°å®ƒé‡Œé¢çš„é‚£ä¸ªåˆ‡æ¢å™¨ã€‚
      linkToUpdate = document.getElementById('lang-toggle-link-en');
      // linkToUpdate = document.getElementById('main-nav');
      console.log(linkToUpdate.href)
      // ç›®æ ‡æ˜¯è‹±æ–‡é¡µ
      let pathWithoutLang = currentPathname.substring(root.length);
      if (pathWithoutLang.startsWith(DEFAULT_LANG + '/')) {
        pathWithoutLang = pathWithoutLang.substring((DEFAULT_LANG + '/').length);
      }
      targetPath = root + SECOND_LANG + '/' + pathWithoutLang;
    }

    // å¦‚æœæ‰¾åˆ°äº†å¯¹åº”çš„é“¾æ¥ï¼Œå°±æ›´æ–°å®ƒ
    if (linkToUpdate) {
      linkToUpdate.href = targetPath;
      console.log(linkToUpdate.href)
    }
  }

  // ç›‘å¬ Pjax åŠ è½½å®Œæˆäº‹ä»¶
  document.addEventListener('pjax:end', updateLanguageUI);
  // é¡µé¢é¦–æ¬¡åŠ è½½æ—¶ä¹Ÿæ‰§è¡Œä¸€æ¬¡
  document.addEventListener('DOMContentLoaded', updateLanguageUI);
</script>
</body>
</html>
